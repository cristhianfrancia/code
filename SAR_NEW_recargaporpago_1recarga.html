<!DOCTYPE html>
<html>
<head>
  <!-- 
    Proyecto: Plantillas
    Creado por: Cristhian Francia
    A√±o: 2020
    Derechos reservados ¬© Cristhian Francia
  -->
    <title>Plantillas - SAR - 2 recargas</title>
    <style>
        body {
            font-family: Calibri, Arial, sans-serif;
        }

        .container {
            width: 95%;
            max-width: 1000px auto;
            margin: 10px auto;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 8px 10px rgba(0, 0, 0, 0.2);
            padding: 30px;
            position: relative;
            transition: box-shadow 0.3s ease;
        }

        .container:hover {
            box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1);
        }

        .icon-animation {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            background-color: #007BFF;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: spin 2s linear infinite;
        }

        .icon-animation::before {
            content: "üü°";
            font-size: 1.5rem;
            color: white;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .ruta-container {
            background-color: #fff5e9;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            border-left: 4px solid #e67a00;
            font-size: 0.9rem;
            color: #333;
        font-family: Calibri, sans-serif; /* Cambia la fuente a Calibri */
        font-size: 16px; /* Establece el tama√±o de la fuente a 16px */
        }

        hr {
            border: 1px solid #e67a00;
            margin: 10px 0;
        }


    /* Cambiar el color de los resultados generados */
    #resultado span {
        color: #007BFF;
    }

    .popup {
        display: none;
        position: fixed;
        top: 10%; /* Mueve el popup a la parte superior */
        left: 50%;
        transform: translate(-50%, 0%); /* Centra horizontalmente sin bajarlo demasiado */
        background-color: white;
        padding: 20px;
        border: 2px solid black;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        z-index: 9999;
        width: 100%;
        max-width: 900px;
        max-height: 1300px; /* Limita la altura */
        overflow-y: auto; /* Agrega desplazamiento si el texto es largo */
    }


    .popup-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 9998;
    }
    #speechText {
        max-height: 600px; /* Establece una altura m√°xima para el texto */
        overflow-y: auto; /* Agrega barra de desplazamiento si el contenido es largo */
        white-space: pre-wrap; /* Mantiene los saltos de l√≠nea */
        font-family: Calibri, sans-serif; /* Cambia la fuente a Calibri */
        font-size: 16px; /* Establece el tama√±o de la fuente a 16px */
    }


      /* Estilos para el contenedor de la vista previa */
      #imagePopup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.8);
        text-align: center;
      }

      /* Estilos para la imagen de la vista previa */
      #imagePopup img {
        max-width: 100%;
        max-height: 100vh;
        margin-top: 20px;
      }

      /* Estilos para el bot√≥n de cerrar */
      .close-button {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        background-color: #fff;
        color: #000;
        border: none;
        padding: 8px 16px;
        font-size: 14px;
        cursor: pointer;
      }

    .footer-autor {
      text-align: center;
      margin-top: 30px;
      padding: 15px;
      font-size: 0.8rem;
      color: #aaa;
      border-top: 1px solid #eee;
      user-select: none;
    }
    .footer-autor strong {
      color: var(--bitel-blue);
    }

</style>

<script>

    document.addEventListener('contextmenu', event => {
        event.preventDefault();
        alert('El men√∫ contextual (clic derecho) est√° deshabilitado.'); 
    });

    document.onkeydown = function(e) {
        if (e.key === 'F12' || e.keyCode === 123) {
            alert('Las herramientas de desarrollador est√°n deshabilitadas.'); 
            return false;
        }
        if (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.key === 'I')) {
            return false;
        }
        if (e.ctrlKey && e.shiftKey && (e.keyCode === 74 || e.key === 'J')) {
            return false;
        }
        if (e.ctrlKey && e.shiftKey && (e.keyCode === 67 || e.key === 'C')) {
            return false;
        }
        if (e.ctrlKey && (e.key === 'u' || e.key === 'U')) {
            return false;
        }
    };

    window.onload = function() {
        let fechaLimite = new Date("2026-03-31T23:59:59");
        let fechaActual = new Date();
        if (fechaActual > fechaLimite) {
            document.body.innerHTML = "<h1 style='text-align:center; color:red; margin-top:20%;'>Apartado requiere mantenimiento<br></h1><h5 style='text-align:center; color:red'>(Actualizaci√≥n en proceso)</h5>";
        }
    };

        function mostrarFormulario() {
            let seleccion = document.getElementById("tipoRecarga").value;
            document.getElementById("form1Recarga").style.display = seleccion === "1" ? "block" : "none";
            document.getElementById("resultado").style.display = "none";
        }

        function formatoFecha(fecha) {
            if (!fecha) return "";
            let partes = fecha.split("-");
            return `${partes[2]}/${partes[1]}/${partes[0]}`;
        }

function checkLength(input) {
    // Permitir solo n√∫meros, el guion (-), punto (.) y dos puntos (:)
    input.value = input.value.replace(/[^0-9-:.]/g, "");

    // Limitar la longitud a 9 caracteres
    if (input.value.length > 9) {
        input.value = input.value.slice(0, 9);
    }
}

function actualizarResultados() {
    let campos = document.querySelectorAll("#form1Recarga input, #form1Recarga select");
    campos.forEach(el => {
        let resultado = document.getElementById("res" + el.id.charAt(0).toUpperCase() + el.id.slice(1));
        if (resultado) {
            if (el.type === "date") {
                resultado.innerText = formatoFecha(el.value);
            } else if (el.id === "nombrePersonal" || el.id === "nombreAbonado") {
                el.value = formatearNombre(el.value); // Formatea el input directamente
                resultado.innerText = el.value;
            } else {
                resultado.innerText = el.value;
            }
        }
    });



    // Asegurar que fecha5 tambi√©n se formatee correctamente
    let fecha5 = document.getElementById("fecha5").value;
    document.getElementById("resfecha5").innerText = formatoFecha(fecha5);

    // Obtener el valor del monto
    let monto = document.getElementById("monto").value;
    if (monto) {
        document.querySelectorAll(".resMonto").forEach(span => {
            span.innerText = monto;
        });
    }

    // Actualiza el primer nombre con el color #007BFF
    let primerNombre = obtenerPrimerNombre(document.getElementById("nombreAbonado").value);
    document.querySelectorAll(".primerNombre").forEach(span => {
        span.innerHTML = `<span style="color: #007BFF;">${primerNombre}</span>`;
    });

    // Reemplazar "(REEMPLAZA)" en los textos con el valor de "monto"
    let resultadoTexto = document.getElementById("resultado").innerHTML;
    resultadoTexto = resultadoTexto.replace(/\(REEMPLAZA\)/g, monto);
    document.getElementById("resultado").innerHTML = resultadoTexto;

    document.getElementById("resultado").style.display = "block";
}



function formatearNombre(texto) {
    return texto
        .toLowerCase()
        .replace(/(^|\s)([a-z√°√©√≠√≥√∫√±√Å√â√ç√ì√ö√ë])/g, (match) => match.toUpperCase());
}



function limpiarResultados() {
    document.querySelectorAll("#form1Recarga input").forEach(el => el.value = "");
    document.getElementById("resultado").style.display = "none";
    
    // Limpiar el contenido de los spans con la clase "primerNombre"
    document.querySelectorAll(".primerNombre").forEach(span => {
        span.innerHTML = "";
    });
}


        function copiarTexto() {
            let texto = document.getElementById("resultado");
            // Crea un campo de texto temporal para copiar el contenido
            let inputTemp = document.createElement("textarea");
            inputTemp.value = texto.innerText; // Copiar texto
            document.body.appendChild(inputTemp);
            inputTemp.select();
            document.execCommand("copy");
            document.body.removeChild(inputTemp);

            alert("Texto copiado al portapapeles");
        }



function leerSpeech() {
    let plazo = document.getElementById("plazo").value;
    let nombreAbonado = document.getElementById("nombreAbonado").value || "(Nombres y apellidos completos del cliente)";
    let numeroAbonado = document.getElementById("numeroAbonado").value || "XXXXXX";
    let dniAbonado = document.getElementById("dniAbonado")?.value || "XXXXXX";
    let monto = document.getElementById("monto").value || "XX";
    let fechaActual = obtenerFechaActual();

    let speech = "";

    if (plazo === "10 d√≠as h√°biles") {
        speech = `
üëâ 10 d√≠as h√°biles üëà

"Sr(a). <span style="color: #007BFF">(PRIMER NOMBRE Y PRIMER APELLIDO DEL CLIENTE)</span>, identificado como abonado de la l√≠nea <span style="color: #007BFF">${numeroAbonado}</span>, con DNI <span style="color: #007BFF">${dniAbonado}</span>, con fecha <span style="color: #007BFF">${fechaActual}</span>, expresa con libre voluntad, encontrarse de acuerdo con la soluci√≥n anticipada brindada por Bitel ante la problem√°tica descrita respecto a la materia Facturaci√≥n y Cobro en aceptaci√≥n del ofrecimiento efectuado por Bitel donde realizaremos el ajuste en su facturaci√≥n por el monto de S/<span style="color: #007BFF">${monto}</span>, la cual se ejecutar√° en un plazo no mayor a 10 d√≠as h√°biles de acuerdo al articulo 20¬∞ Del reglamento de reclamos.

De encontrarse de acuerdo con lo manifestado diga fuerte y claro, SI ACEPTO."
        `;
    } else if (plazo === "1 d√≠a h√°bil") {
        speech = `
üëâ 1 d√≠a h√°bil üëà

"Estimado cliente, como le mencionaba el plazo legal establecido por OSIPTEL es no mayor a 10 d√≠as h√°biles; sin embargo, le ofrecemos ejecutar el cumplimiento en un plazo m√≠nimo de 1 d√≠a h√°bil".

                    **********************************
                            Si el cliente acepta, continuamos
                    **********************************

"Sr(a). <span style="color: #007BFF">(PRIMER NOMBRE Y PRIMER APELLIDO DEL CLIENTE)</span>, identificado como abonado de la l√≠nea <span style="color: #007BFF">${numeroAbonado}</span>, con DNI <span style="color: #007BFF">${dniAbonado}</span>, con fecha <span style="color: #007BFF">${fechaActual}</span>, expresa con libre voluntad, encontrarse de acuerdo con la soluci√≥n anticipada brindada por Bitel ante la problem√°tica descrita respecto a la materia Facturaci√≥n y Cobro, en aceptaci√≥n del ofrecimiento efectuado por Bitel donde realizaremos el ajuste en su facturaci√≥n por el monto de S/<span style="color: #007BFF">${monto}</span>, la cual se ejecutar√° en un plazo no mayor a 1 d√≠a h√°bil de acuerdo al articulo 20¬∞ Del reglamento de reclamos.

De encontrarse de acuerdo con lo manifestado diga fuerte y claro, SI ACEPTO."
        `;
    }

    if (speech !== "") {
        let popup = document.getElementById("popupSpeech");
        let overlay = document.getElementById("popupOverlay");
        let speechText = document.getElementById("speechText");

        speechText.innerHTML = speech; // Mantiene los estilos
        popup.style.display = "block";
        overlay.style.display = "block";
    } else {
        alert("Por favor, selecciona un plazo para generar el speech.");
    }
}




function obtenerFechaActual() {
    const today = new Date();
    const day = String(today.getDate()).padStart(2, '0');
    const month = today.getMonth(); // Mes empieza desde 0
    const year = today.getFullYear();
    
    const meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
    
    return `${day} de ${meses[month]} del ${year}`;
}


        function cerrarPopup() {
            let popup = document.getElementById("popupSpeech");
            let overlay = document.getElementById("popupOverlay");
            popup.style.display = "none";
            overlay.style.display = "none";
        }

function obtenerPrimerNombre(texto) {
    return texto.trim().split(" ")[0] || ""; // Extrae la primera palabra
}

    // Funci√≥n para mostrar la ventana emergente de la imagen
    function showImagePopup(event) {
      event.preventDefault();
      const imagePopup = document.getElementById("imagePopup");
      imagePopup.style.display = "block";
      return false;
    }

    // Funci√≥n para ocultar la ventana emergente de la imagen
    function hideImagePopup() {
      const imagePopup = document.getElementById("imagePopup");
      imagePopup.style.display = "none";
    }

    let datosGuardados = {};

    function limpiarResultados() {
        // Guardar los valores actuales
        let campos = document.querySelectorAll("#form1Recarga input, #form1Recarga select");
        datosGuardados = {};
        campos.forEach(el => datosGuardados[el.id] = el.value);

        // Limpiar los valores
        campos.forEach(el => el.value = "");
        document.getElementById("resultado").style.display = "none";

        // Mostrar bot√≥n "Deshacer"
        let deshacerBtn = document.getElementById("deshacerBtn");
        deshacerBtn.style.display = "inline";

        // Ocultar el bot√≥n despu√©s de 15 segundos si el usuario no lo usa
        setTimeout(() => {
            deshacerBtn.style.display = "none";
        }, 15000);
    }

    function restaurarDatos() {
        let campos = document.querySelectorAll("#form1Recarga input, #form1Recarga select");
        campos.forEach(el => {
            if (datosGuardados[el.id] !== undefined) {
                el.value = datosGuardados[el.id];
            }
        });

        // Actualizar los resultados con los datos recuperados
        actualizarResultados();

        // Ocultar el bot√≥n "Deshacer"
        document.getElementById("deshacerBtn").style.display = "none";
    }


    </script>
</head>
<body>


<label style="color: red;"><strong>1. Plantilla para 1 recarga:</strong></label>
<br><br>

<div id="form1Recarga">

<span style="color: red"><input type="number" id="Numero1" oninput="checkLength(this); actualizarResultados()" placeholder="(N√∫mero del que llama)" title="M√°ximo 9 d√≠gitos" required></span> // Cliente se√±ala que realiza una recarga en lugar de efectuar su pago // Se ofrece soluci√≥n anticipada de reclamo<br><br>

        <label>1. C√≥digo o n√∫mero correlativo de la atenci√≥n realizada: </label> <input type="text" id="codigo" oninput="actualizarResultados()" placeholder="-"><br>
        <label>2. Nombres y apellidos completos del personal de Bitel que atendi√≥ al abonado/usuario: </label> <input type="text" id="nombrePersonal" oninput="actualizarResultados()" placeholder="(Tus datos completos)" title="Tus nombres y apellidos completos" required><br>
        <label>3. Nombres y apellidos completos del abonado/usuario:</label> <input type="text" id="nombreAbonado" oninput="actualizarResultados()" placeholder="(Datos del cliente)" title="Nombres y apellidos completos del cliente" required><br>
        <label>4. N√∫mero o c√≥digo del servicio del abonado/usuario:</label> <input type="number" id="numeroAbonado" oninput="checkLength(this); actualizarResultados()" placeholder="(#celular para SAR)" title="M√°ximo 9 d√≠gitos" required><br>

        <label>5. Petici√≥n del usuario, as√≠ como su fecha y hora: Cliente realiz√≥ recarga en lugar de pago por el monto de S/<input type="text" id="monto" oninput="checkLength(this); actualizarResultados()" placeholder="X.XX | XX.XX" title="Ejemplo: 3.00 | 10.00" required> con fecha <input type="date" id="fecha1" oninput="actualizarResultados()"> a las <input type="text" id="hora1" oninput="checkLength(this); actualizarResultados()" placeholder="HH:MM:SS" title="Ejemplo: 08:00:10" required>, solicita ajuste de facturaci√≥n. Fecha: <input type="date" id="fecha5" oninput="actualizarResultados()">. Hora: <input type="time" id="hora5" oninput="checkLength(this); actualizarResultados()">.</label><span style="color: red"> (<- Fecha y Hora en la que pide el cliente)</span><br>

        <label>6. Ofrecimiento realizado al abonado/usuario de acuerdo al punto anterior: Se le realiza asignaci√≥n de S/<span class="resMonto"></span> como ajuste a su factura sin beneficios adicionales, ya que cliente recarg√≥ en lugar de generar el pago. SAR por fidelizaci√≥n.<br>
        <label>7. Fecha y hora de la aceptaci√≥n del abonado/usuario: Fecha: </label> <input type="date" id="fecha3" oninput="actualizarResultados()"> Hora: </label> <input type="time" id="hora3" oninput="actualizarResultados()"><span style="color: red"> (<- Fecha y Hora en la que acepta el cliente)</span><br>
        <label>8. Identificaci√≥n del mecanismo de aceptaci√≥n del Abonado/usuario: Audio telef√≥nico<br>
        <label>9. Plazo de ejecuci√≥n del SAR:</label>
        <select id="plazo" onchange="actualizarResultados()">
            <option value="">Seleccionar</option>
            <option value="10 d√≠as h√°biles">10 d√≠as h√°biles</option>
            <option value="1 d√≠a h√°bil">1 d√≠a h√°bil</option>
        </select>

<button type="button" onclick="leerSpeech()">Leer speech de grabaci√≥n</button>
<br><label>10. N√∫mero de referencia:</label> <input type="text" id="referencia" oninput="checkLength(this); actualizarResultados()" title="M√°ximo 9 caracteres, incluye guion si no hay n√∫mero" required> <span style="color: red">(<- Si no brinda, colocar un guion: "-")</span>
<br><label>$$_<input type="text" id="id" placeholder="ID de llamada" oninput="actualizarResultados()">_&&
</div>

<br>
<span style="color: red"><strong>‚úÖ Resultado</strong></span>
<br>

<div id="resultado" style="display:none;">
<div class="ruta-container" style="border-left: 4px solid #e67a00; background-color: #fff5e9; padding: 10px;">

<span id="resNumero1"></span> // Cliente se√±ala que realiza una recarga en lugar de efectuar su pago // Se ofrece soluci√≥n anticipada de reclamo<br><br>

1. C√≥digo o n√∫mero correlativo de la atenci√≥n realizada: -<br>
2. Nombres y apellidos completos del personal de Bitel que atendi√≥ al abonado/usuario: <span id="resNombrePersonal"></span><br>
3. Nombres y apellidos completos del abonado/usuario: <span id="resNombreAbonado"></span><br>
4. N√∫mero o c√≥digo del servicio del abonado/usuario: <span id="resNumeroAbonado"></span><br>

5. Petici√≥n del usuario, as√≠ como su fecha y hora: Cliente realiz√≥ recarga en lugar de pago por el monto de S/<span class="resMonto"></span> con fecha <span id="resFecha1"></span> a las <span id="resHora1"></span>, solicita ajuste de facturaci√≥n. Fecha: <span id="resfecha5"></span> Hora: <span id="resHora5"></span>.<br>

6. Ofrecimiento realizado al abonado/usuario de acuerdo al punto anterior: Se le realiza asignaci√≥n de S/<span class="resMonto"></span> como ajuste a su factura sin beneficios adicionales, ya que cliente recarg√≥ en lugar de generar el pago. SAR por fidelizaci√≥n.<br>
7. Fecha y hora de la aceptaci√≥n del abonado/usuario: Fecha: <span id="resFecha3"></span> Hora: <span id="resHora3"></span><br>
8. Identificaci√≥n del mecanismo de aceptaci√≥n del Abonado/usuario: Audio telef√≥nico<br>
9. Plazo de ejecuci√≥n del SAR: <span id="resPlazo"></span><br>
10. N√∫mero de referencia: <span id="resReferencia"></span><br>
$$_<span id="resId"></span>_&&
</div>
</div>

<br>

<button onclick="copiarTexto()">Copiar</button>
<button type="button" onclick="limpiarResultados()" style="margin-left: 20px;">Limpiar</button>
<button id="deshacerBtn" style="display:none;" onclick="restaurarDatos()">Deshacer √∫ltima acci√≥n</button>

<br><br><hr><br>

<label style="color: red;"><strong>2. Tipificaci√≥n: </strong></label><a href="#" onclick="return showImagePopup(event)">(Clic para ver)</a>

<div id="imagePopup">
<button class="close-button" onclick="hideImagePopup()">CERRAR</button>
<img src="https://i.postimg.cc/TPS50NXR/SAR_1_recarga_New.png" alt="Imagen de vista previa 1">
</div>

<div class="ruta-container">
SAR - Recharge Instead of Payment / Soluci√≥n anticipada / Soluci√≥n anticipada / SAR - Infundado / Ajuste / Facturaci√≥n y cobro
</div>


<br>

<label style="color: red;"><strong>3. Speech:</strong></label>

<div class="ruta-container">
<strong><span style="color: #01768b">üéß Agente: </span></strong><span class="primerNombre"></span>, el codigo de SAR es <span style="color: red">SA00000XXXXX</span>. Finalmente, precisar que dentro del plazo m√°ximo de <span style="color: red">5 d√≠as h√°biles</span> le enviaremos un SMS o lo llamaremos para confirmar la ejecuci√≥n del SAR ofrecido. Asi mismo le invitamos a efectuar el seguimiento del SAR mediante nuestra plataforma del Expediente Virtual en www.bitel.com.pe
</div>

<br>

<label style="color: red;"><strong>4. Despedida:</strong></label>

<div class="ruta-container">
<strong><span style="color: #01768b">üéß Agente: </span></strong>Eso ser√≠a todo de mi parte, Muchas gracias por comunicarse con Bitel. En breve recibir√° un mensaje para calificar la atenci√≥n brindada.
</div>

<br><br><br><br><br><br>
<textarea id="textareaResultado" style="position: absolute; left: -9999px;"></textarea>

<div class="footer-autor">
Developed by c&f &copy; 2020 | All rights reserved.
</div>
</div>


    <!-- Popup de Speech -->
    <div id="popupOverlay" class="popup-overlay" onclick="cerrarPopup()"></div>
    <div id="popupSpeech" class="popup">
        <h2>Speech de grabaci√≥n</h2>
        <pre id="speechText"></pre>
        <button onclick="cerrarPopup()">Cerrar</button>
    </div>
</body>
</html>

